# Cпецификация  компоненты "Моя анкета" (profile.xml)

## 1. Назначение компоненты

Визуальный интерфейс для отображения, редактирования или удаления навыков, образования и других компетенций сотрудника.

## 2. Внешний вид и поведение компоненты

Интерфейс компоненты состоит из

Заголовок:

- ФИО сотрудника
- Должность
- Название департамента
- Дату рождения
- Территориальное нахождение сотрудника
- ФИО руководителя
- Номер служебного и мобильного телефона
- Адрес электоронной почты

Секций:

- Образование
- Навыки
- Повышение квалификации, курсы
- Дополнительная информация
- Комментарии
  
Секция **Образование** - представляет собой строку содержащую поля и элементы управления. Секция может содержать только одну строку с образованием.

Состоит из:

- Год окончания
- Название учебного заведения
- Название специальности
- Элемент управления [карандаш] открытие формы редактирования данных
- Элемент управления [X] удаление записи

Если данных об образовании нет, то в этой секции отобажается только элемент [+] добавить запись. При нажатии на этот элемент открывается форма заполнения полей. Все поля формы обязательны для заполнения. Форма сохраняется нажатием на элемент в виде [+]. При сохранении формы, поля должны валидироватся, а форма скрываться. В случае не корректного заполнения полей, пользователю отображается сообщение о полях, которые требуют корректировки, при повторном открытии формы они должны быть выделенны как требующие корректировки. В случае успешного сохранения записи в базу данные отображаются в виде указанных выше полей и элементов управления.

Для редактирования данных образования необходимо нажать на элемент управления [карандаш], после этого строка отображающая данные скрывается, а на её месте открывается форма заполнения полей, которая содержит редактируемые данные в соответствующих полях. После редактирования данных процедура сохранения и валидирования такая же как при добавлении.

Удаление записи происходит по нажатию на элемент [X]. При этом пользователю отображается окно для подтверждения удаления записи. Пользователь может подтвердить или отклонить это действие выбрав соответствующее. Если пользователь отклонил действие удаления записи, то окно сообщения закрывается и данные записи остаются без изменения. Если пользователь подтвердил удаление, то ему выводится сообщение об удалении записи, сама запись удаляется, а в место неё отображается элемент [+] добавить. При наведениии курсора на запись или элементы управления они должны выделятся.

Секция **Навыки** - представляет собой строку содержащую поля и элемент управления. Секция может содержать одну или несколько строк.

Состоит из:

- маркер
- Навык
- Элемент управления [X] удаление записи

Если данных о навыках нет, то в этой секции отобажается только элемент [+] добавить запись. При нажатии на этот элемент открывается форма заполнения в виде многострочного поля. Форма не требует валидации. Форма сохраняется нажатием на элемент [+]. При сохранении форма скрывается. В случае успешного сохранения записи в базу данных она отображается в виде указанных выше полей и элементов управления. При наведениии курсора на запись или элемент управления они должны выделятся. Удаление записи происходит так же как описанно выше в секции образование.

Секция **Повышение квалификации, курсы** - представляет собой строку содержащую поля и элементы управления. Секция может содержать одну или несколько строк.

Состоит из:

- Год окончания
- Название учебного заведения
- Название специальности
- Элемент управления [X] удаление записи

 Поведение добавления и удаления записи аналогично секции образование. В этой секции редактирование записи не предусмотренно.

Секция **Дополнительная информация** - представляет собой несколько строк содержащих информацию о наличии личного автомобиля и открытые категории водительского удостоверения сотрудника.

Строка личный автомобиль содержит:

- Чек бокс
- Элемент управления [карандаш]  разблокировка редактирования

До изменения записи чек бокс заблокирован. Для изменения данных о наличии автомобиля пользователь нажимает на элемент управления [карандаш], после этого отображается сообщение для подтверждения действия редактирования. Чек бокс активируется для изменения. Визуально это отображается как мигание чек бокса. После переключения состояния чек бокса он блокируется.

Строка права категории содержит:

- Название категорий водительского удостоверения
- Элемент управления [карандаш] открытие формы редактирования данных

Для изменения данных о категориях пользователь нажимает на элемент управления [карандаш], после этого отображается сообщение для подтверждения действия редактирования. В случае продолжения редактирования открывается форма содержащая список категорий. Изменение наличия категорий производится путем переключения состояния чек бокса у соответствующей категории. Далее нажимает на элемент [+] добавить. Форма редактирования скрывается.

Секция **Комментарии** - представляет собой строку содержащую поля и элемент управления. Секция может содержать одну или несколько строк.

Состоит из:

- ФИО комментатора
- Дата комментария
- Комментарий

Если данных о комментариях нет, то в этой секции отобажается только элемент [+] добавить запись. При нажатии на этот элемент открывается форма заполнения в виде многострочного поля. Форма не требует валидации. Форма сохраняется нажатием на элемент в виде [+]. При сохранении форма скрывается. В случае успешного сохранения записи в базу данные отображаются в виде указанных выше полей. Удаление записи не предусмотренно.

## 3. Внешние данные компоненты (props)

Отсутствуют.

### 3.1 Переменные

```plantuml

skinparam titleFontSize 16
title
|= Имя |= Тип |= Описание |
| editorName | Строка | Название редактора |
| caption | Строка | Название поля объекта |
| value | Логический | Значение редактора |
| level | Число | Уровень вложенности объекта |
| index | Число | Индекс объекта |
| onChange | Функция | Обработчик значения состояния редактора |
| validated | Логический | Состояние валидации |
| type | Строка | Тип значения |
end title

```

## 4. Внутренние данные (state)

Отсутствуют.

## 5. Особенности верстки

Компонента состоит из  элемента div внутри которого находятся еще два  div. Первый содержит название редактируемого поля, а второй его значение. Текстовое поле реализуется  элементом input с типом text. При отображении таких же редакторов в компоненте "Карточка объекта", длина поля названия, должна быть одинаковой, а поле значения занимать все оставшееся место строки. Каждый следующий уровень содержащий редактор, должен у поля название, увеличивать - padding-left на 5px (1ур. - 0, 2ур. - 5рх., 3ур. - 10рх., и т.д.).  При реализации компоненты следует использовать методологию БЭМ для именования классов элементов и  библиотеку стилей flex-layout для построения каркаса контейнеров. Отображение компоненты должно соответствовать общему стилю приложения.

## 6. Особенности реализации

Компонента реализуется как шаблон с расширением xml. Форма ввода данных  Образование и Повышение квалификации, курсы содержит одинаковые поля и элементы упраления. Форма ввода данных Навыки и Комментарии содержит одинаковые поля и элементы упраления. Реализуются как шаблоны.

### 6.1 handleChange - обработчик значения переменной value элемента input

```plantuml

skinparam titleFontSize 16
title
|= Имя |= Тип |= Описание |
| value | Строка | Текстовое значение |
| onChange | Функция | Обработчик значения состояния редактора |
end title

```

### 6.2 handleValidation - обработчик валидации

Проверяет значение текстового поля на тип number.

```plantuml

skinparam titleFontSize 16
title
|= Имя |= Тип |= Описание |
| type | Строка | Тип значения |
| validated | Логический | Состояние валидации |
end title

```

### 6.3 handleResetValidation - обработчик сброса сообщения о валидации

Скрывает сообщение о не корректном типе введенных данных, путем сравнивания индекса объекта с текущим индексом. Если они равны, то меняет переменную validated на false.

```plantuml

skinparam titleFontSize 16
title
|= Имя |= Тип |= Описание |
| index | Число | Индекс объекта |
| current | Число | Текущий индекс объекта |
| validated | Логический | Состояние валидации |
end title

```

### 6.4 handleCurrent - обработчик установки текущего индекса объекта

Устанавливает в переменную current индекс объекта.

## 7. Тестирование компоненты

Тестирование компоненты проводится путем визуального осмотра работающего интерфейса.
